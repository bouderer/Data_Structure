# 鸡蛋掉落问题（Egg Dropping Problem）

**时间限制：** 1 秒  
**内存限制：** 256 MB  

---

## 📘 Description

给定若干个鸡蛋和一栋多层建筑。  
现在要找出鸡蛋从哪一层开始扔下去会碎。  
目标是在**最坏情况下**，使用最少次数的测试，确定鸡蛋的临界层。

---

### ⚙️ 规则

1. 如果鸡蛋摔碎了，说明临界层在当前层以下。  
2. 如果鸡蛋没碎，说明临界层在当前层以上。  
3. 鸡蛋碎了就不能再用。  
4. 所有鸡蛋完全相同。  
5. 目标是最小化最坏情况下的测试次数。

---

## 🧮 函数定义

### `void initAnswers()`

**功能：** 初始化辅助表，用于计算不同鸡蛋和次数下可测试的最大楼层数。

---

### `int nextTestFloor(int floor, int eggsLeft, int lastSurvival, int lastBreak)`

**功能：** 根据上一次结果，确定下一次要测试的楼层。

**参数说明：**
- `floor`: 当前层号；  
- `eggsLeft`: 剩余鸡蛋数；  
- `lastSurvival`: 上一次安全的最高层；  
- `lastBreak`: 上一次碎裂的最低层。  

**返回值：** 下一次应测试的楼层编号。

**逻辑说明：**
1. 若上次没碎，则往更高层测试。  
2. 若上次碎了，则往更低层测试。  
3. 若两者都未定义，则从基础层加上偏移量开始测试。
4. 需要通过计算剩余的`bottom`到`top`的范围，然后当作新的楼层。在`dp`中查表，找到（假设当前还有`e`个鸡蛋，`t`次测试机会）`k=dp[e-1,t-1]+1`层作为偏移量。因为`dp[e-1,t-1]`代表这次测试如果蛋还是碎的话，下一次测试可以覆盖的层数，所以`+1`就是交界.

---

### `int canHandleFloors(int eggs, int numTries)`

**功能：** 计算当有 `eggs` 个鸡蛋、最多扔 `numTries` 次时，最多能测多少层楼。

**递推公式：**
\[
f(e, t) = f(e-1, t-1) + f(e, t-1) + 1
\]

**示例：**
| 鸡蛋数 | 测试次数 | 最多可测楼层 |
|--------|-----------|---------------|
| 1 | 10 | 10 |
| 2 | 8 | 36 |
| 4 | 4 | 15 |

---

### `int minTimesForBuilding(int eggs, int numFloors)`

**功能：** 计算给定楼层数下，最少需要多少次测试才能确定临界层。

**算法思路：**
不断增加 `numTries`，直到：  
\[
canHandleFloors(eggs, numTries) \geq numFloors
\]

---

## 💡 输入说明
无输入。

---

## 💬 输出说明
无输出。

---

## 🔍 提示 (Hint)

- 可在 `w8p4start.cpp` 中调用部分函数验证。  
- 输出结果应包括：`canHandleFloors()`、`minTimesForBuilding()`、`nextTestFloor()` 的结果比较。  
- 若 `nextTestFloor()` 的输出正确，系统显示 “Good”；否则为 “Bad”。

---

## 🧠 举例推导

**例 1：**  
2 个鸡蛋、8 次机会  
\[ f(2,8) = 36 \]  
→ 可以覆盖 36 层。

**例 2：**  
4 个鸡蛋、4 次机会  
\[ f(4,4) = 15 \]  
→ 可以覆盖 15 层。

---

## 📚 思考要点

1. 如何实现递推式 `f(e,t)` 的动态规划算法。  
2. 如何通过 `f(e,t)` 推导出最少次数。  
3. `nextTestFloor()` 的策略如何计算偏移量。

---

## 🧩 Problem Source
动态规划问题——鸡蛋掉落模型。  
